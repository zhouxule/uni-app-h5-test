import{a as e,l as a,c as l,w as s,i as t,o as n,b as u,m as o,p as c,d as i,e as r,S as d,q as v,F as f,u as _,t as m,I as p,f as h,n as g,v as y,g as k,h as b,x as C}from"./index-CenjfmAL.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=w({__name:"chat",setup(w){const x=e(!1),F=e(!1),A=e([]),T=e([]),V=e(""),$=e("");a(()=>{G(),T.value.push({role:"assistant",content:"您好！我是您的专属金融助手，请问有什么可以帮您？"})});const j=()=>{x.value=!x.value},G=()=>{F.value=!0,console.log("正在从后端获取历史记录..."),setTimeout(()=>{A.value=[{id:"conv1",title:"关于A公司的财报分析"},{id:"conv2",title:"2025年第一季度市场趋势"},{id:"conv3",title:"如何评估一只股票"}],F.value=!1},1500)},I=async()=>{if(!V.value.trim())return;const e={role:"user",content:V.value};T.value.push(e);const a=V.value;V.value="",await B(),T.value.push({role:"assistant",content:"正在思考..."}),await B(),setTimeout(()=>{const e=`关于“${a}”这个问题，我的分析如下：...`;T.value[T.value.length-1].content=e},2e3)},q=()=>{y({count:1,success:e=>{console.log("选择的文件:",e.tempFiles[0]),e.tempFiles[0].path,k({title:"上传分析中..."}),setTimeout(()=>{b(),T.value.push({role:"user",content:`[文件] ${e.tempFiles[0].name}`}),T.value.push({role:"assistant",content:"文件已收到，正在为您分析财报..."}),B()},2e3)}})},B=()=>new Promise(e=>{C(()=>{$.value="msg-"+(T.value.length-1),e()})}),P=()=>{g({url:"/pages/user/user"})};return(e,a)=>{const g=i,y=t,k=d,b=p,C=h;return n(),l(y,{class:"chat-container"},{default:s(()=>[u(y,{class:c(["sidebar",{"is-open":x.value}])},{default:s(()=>[u(y,{class:"sidebar-header"},{default:s(()=>[u(g,{class:"sidebar-title"},{default:s(()=>[r("历史记录")]),_:1}),u(g,{class:"close-btn",onClick:j},{default:s(()=>[r("×")]),_:1})]),_:1}),u(k,{class:"history-list","scroll-y":""},{default:s(()=>[(n(!0),v(f,null,_(A.value,e=>(n(),l(y,{class:"history-item",key:e.id,onClick:a=>{return l=e.id,console.log(`加载会话: ${l}`),j(),T.value=[],void(T.value=[{role:"user",content:"帮我分析一下A公司的最新财报"},{role:"assistant",content:"好的，正在为您分析... A公司的最新财报显示其营收同比增长了15%。"}]);var l}},{default:s(()=>[u(g,{class:"history-title"},{default:s(()=>[r(m(e.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),F.value?(n(),l(y,{key:0,class:"loading-state"},{default:s(()=>[r("加载中...")]),_:1})):o("",!0),F.value||0!==A.value.length?o("",!0):(n(),l(y,{key:1,class:"empty-state"},{default:s(()=>[r("暂无历史记录")]),_:1}))]),_:1})]),_:1},8,["class"]),x.value?(n(),l(y,{key:0,class:"overlay",onClick:j})):o("",!0),u(y,{class:c(["main-chat",{"sidebar-open":x.value}])},{default:s(()=>[u(y,{class:"navbar"},{default:s(()=>[u(y,{class:"menu-btn",onClick:j},{default:s(()=>[u(y,{class:"line"}),u(y,{class:"line"}),u(y,{class:"line"})]),_:1}),u(y,{class:"navbar-title"},{default:s(()=>[r("Gemini Bot")]),_:1}),u(y,{class:"user-center-btn",onClick:P},{default:s(()=>[u(g,null,{default:s(()=>[r("我的")]),_:1})]),_:1})]),_:1}),u(k,{class:"messages-area","scroll-y":"","scroll-into-view":$.value,"scroll-with-animation":""},{default:s(()=>[u(y,{class:"message-list"},{default:s(()=>[(n(!0),v(f,null,_(T.value,(e,a)=>(n(),l(y,{key:a,class:c(["message-item",[e.role]]),id:"msg-"+a},{default:s(()=>[u(y,{class:"avatar"},{default:s(()=>[r(m("user"===e.role?"我":"G"),1)]),_:2},1024),u(y,{class:"content"},{default:s(()=>[u(g,null,{default:s(()=>[r(m(e.content),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","id"]))),128))]),_:1})]),_:1},8,["scroll-into-view"]),u(y,{class:"input-area"},{default:s(()=>[u(y,{class:"upload-btn",onClick:q},{default:s(()=>[u(g,null,{default:s(()=>[r("+")]),_:1})]),_:1}),u(b,{class:"input-field",modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),placeholder:"请输入您的问题...",onConfirm:I,"confirm-type":"send"},null,8,["modelValue"]),u(C,{class:"send-btn",onClick:I},{default:s(()=>[r("发送")]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})}}},[["__scopeId","data-v-79353791"]]);export{x as default};
