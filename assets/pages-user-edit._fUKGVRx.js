import{B as e,C as a,O as l,D as s,a as t,E as u,r as d,G as r,c as n,w as o,i as c,o as i,b as f,e as m,t as p,d as _,I as v,H as b,f as h,k as g,s as k,g as y,h as x,J as C,$ as j,j as O}from"./index-CenjfmAL.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=(l=>(t,u=e())=>{!s&&a(l,t,u)})(l,2),V=w({__name:"edit",setup(e){const a=t("complete"),l=u(()=>"complete"===a.value?"完善个人信息":"修改个人信息"),s=d({username:"",gender:"",birthday:""}),w=["保密","男","女"],V=t(0);P(e=>{if("edit"===e.mode){a.value="edit";const e=r("userProfile");e&&(s.username=e.username,s.birthday=e.birthday,s.gender=e.gender,V.value=w.indexOf(e.gender)>-1?w.indexOf(e.gender):0)}});const I=e=>{V.value=e.detail.value,s.gender=w[V.value]},T=e=>{s.birthday=e.detail.value},U=()=>{console.log("提交的表单数据:",s),s.username?(y({title:"保存中..."}),setTimeout(()=>{x(),k({title:"保存成功",icon:"success"});const e=r("userProfile")||{};Object.assign(e,s),C("userProfile",e),j("profileUpdated"),"complete"===a.value?O({url:"/pages/chat/chat"}):setTimeout(()=>{g()},1e3)},1500)):k({title:"昵称不能为空",icon:"none"})},B=()=>{g()};return(e,t)=>{const u=c,d=_,r=v,g=b,k=h;return i(),n(u,{class:"edit-container"},{default:o(()=>[f(u,{class:"navbar"},{default:o(()=>["edit"===a.value?(i(),n(u,{key:0,class:"back-btn",onClick:B},{default:o(()=>[m("<")]),_:1})):(i(),n(u,{key:1,class:"placeholder"})),f(u,{class:"navbar-title"},{default:o(()=>[m(p(l.value),1)]),_:1}),f(u,{class:"placeholder"})]),_:1}),f(u,{class:"form-wrapper"},{default:o(()=>[f(u,{class:"form-item"},{default:o(()=>[f(d,{class:"label"},{default:o(()=>[m("昵称")]),_:1}),f(r,{class:"input-field",modelValue:s.username,"onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),placeholder:"请输入您的昵称"},null,8,["modelValue"])]),_:1}),f(u,{class:"form-item"},{default:o(()=>[f(d,{class:"label"},{default:o(()=>[m("性别")]),_:1}),f(g,{onChange:I,value:V.value,range:w},{default:o(()=>[f(u,{class:"picker-value"},{default:o(()=>[m(p(w[V.value]),1)]),_:1})]),_:1},8,["value"])]),_:1}),f(u,{class:"form-item"},{default:o(()=>[f(d,{class:"label"},{default:o(()=>[m("生日")]),_:1}),f(g,{mode:"date",value:s.birthday,onChange:T},{default:o(()=>[f(u,{class:"picker-value"},{default:o(()=>[m(p(s.birthday||"请选择您的生日"),1)]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),f(u,{class:"submit-btn-wrapper"},{default:o(()=>[f(k,{class:"submit-btn",onClick:U},{default:o(()=>[m("保存信息")]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-e301bb28"]]);export{V as default};
